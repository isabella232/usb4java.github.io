<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2013-09-15
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20130915" />
    <meta http-equiv="Content-Language" content="en" />
    <title>usb4java - Native libraries</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

                          
        
<link rel="SHORTCUT ICON" href="favicon.ico"/>
          
            </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/usb4java/usb4java">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://kayahr.github.com/usb4java/" id="bannerLeft">
                                                                                                <img src="images/logo.png"  alt="usb4java"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2013-09-15</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 1.0.0</li>
                      
                
                    
      
                                              
    <li class="pull-right">              <a href="http://www.libusb.org/" class="externalLink" title="libusb">
        libusb</a>
  </li>

        <li class="divider pull-right">|</li>
      
    <li class="pull-right">              <a href="http://javax-usb.sourceforge.net/" class="externalLink" title="javax.usb">
        javax.usb</a>
  </li>

                        </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">usb4java</li>
                                
      <li>
    
                          <a href="index.html" title="About">
          <i class="none"></i>
        About</a>
            </li>
                  
      <li>
    
                          <a href="quickstart.html" title="Quick start">
          <i class="none"></i>
        Quick start</a>
            </li>
                  
      <li>
    
                          <a href="faq.html" title="FAQ">
          <i class="none"></i>
        FAQ</a>
            </li>
                  
      <li>
    
                          <a href="configuration.html" title="Configuration">
          <i class="none"></i>
        Configuration</a>
            </li>
                  
      <li class="active">
    
            <a href="#"><i class="none"></i>Native libs</a>
          </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                    
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                      
      <li>
    
                          <a href="project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section">
<h2>Library loading<a name="Library_loading"></a></h2>
<p>The native libraries for all supported platforms are included in the standard usb4java JAR file (But there is also one without the native libs if you want to package them in your own way). usb4java determines on startup which libraries are needed for the current platform and extracts them to a temporary directory and loads them from there. This makes it easy to use usb4java because you just need to put the JAR in your classpath. No need to fiddle around with <i>java.library.path</i> or environment variables like <i>LD_LIBRARY_PATH</i> or <i>DYLD_LIBRARY_PATH</i>.</p>
<p>usb4java only extracts the files into a temporary directory when they are inside a JAR file. So if you prefer direct loading without extracting to a temporary directory then you may want to use the <i>usb4java-no-natives.jar</i> file instead and ship the native libraries with your application in extracted form. Here is an example application layout:</p>
<div class="source">
<pre>natives/
  de/ailis/usb4java/libusb/
    linux-x86/libusb4java.so
    windows-x86/libusb4java.dll
    osx-x86/libusb4java.dylib
lib/
  usb4java-no-natives.jar
  commons-lang3.jar
  usb.jar
myapp.sh</pre></div>
<p>To make this work just make sure to put the <i>natives</i> folder into your classpath. The native libraries itself can be found in the <i>usb4java.jar</i> or the <i>usb4java-natives.jar</i> file.</p></div>
<div class="section">
<h2>Unsupported platforms<a name="Unsupported_platforms"></a></h2>
<p>When you use usb4java on a platform which is not directly supported by usb4java then you might get one of the following two exceptions:</p>
<div class="source">
<pre>Native library not found in classpath: /de/ailis/usb4java/libusb/freebsd-x86/libusb4java.so</pre></div>
<div class="source">
<pre>Unable to determine the shared library file extension for operating system 
'strangeos'. Please specify Java parameter -Dusb4java.libext.strangeos=&lt;FILE-EXTENSION&gt;</pre></div>
<p>If you get the second one then this simply means that your operating system is completely unknown to the usb4java author and usb4java does not know the file extension of shared libraries on this platform. You can fix this by specifying a Java parameter like this (As explained in the exception):</p>
<div class="source">
<pre>-Dusb4java.libext.strangeos=so</pre></div>
<p>After this you will most likely get the other exception, which means that there is no native JNI wrapper present for this platform. Your only chance here is to compile this wrapper yourself. I can't predict how this works on really strange platforms but chances are high that your platform is somewhat Unix-compatible. So try this:</p>
<p>1. Install a Java JDK (<a class="externalLink" href="http://openjdk.java.net/">OpenJDK</a> for example). Make sure the environment variable <i>JAVA_HOME</i> is pointing to the directory where you have installed the JDK.</p>
<p>2. Install the <a class="externalLink" href="http://www.libusb.org/">libusb</a> development files.</p>
<p>3. Install <a class="externalLink" href="http://git-scm.com/">Git</a>.</p>
<p>4. Clone the <a class="externalLink" href="https://github.com/kayahr/usb4java/">usb4java source code repository</a> with Git:</p>
<div class="source">
<pre>$ git clone git://github.com/kayahr/usb4java.git</pre></div>
<p>5. Go to the directory containing the C sources of the JNI wrapper:</p>
<div class="source">
<pre>$ cd usb4java/src/main/c</pre></div>
<p>6. Compile the wrapper:</p>
<div class="source">
<pre>$ ./autogen.sh
$ ./configure --prefix=/
$ make install-strip DESTDIR=/tmp</pre></div>
<p>8. When compilation was successful then the native library can be found in the directory <i>/tmp/lib</i>. The file name depends on your operating system. Make sure you rename it to <i>libusb4java.so</i> (Or whatever file extension your platform uses) and copy this file into the directory <i>/de/ailis/usb4java/libusb/OS-ARCH/</i> in your classpath where <i>OS</i> is the name of your operating system and <i>ARCH</i> is your CPU architecture (Both must match the names mentioned in the exception thrown by usb4java.)</p>
<p>If you can't use the GNU compiler or the autotools then you are on your own. If you have some experience with compiling JNI libraries then I guess this won't be hard for you. There are only a couple of source files in the <i>src</i> sub folder. You could write a new simple Makefile or whatever is needed on your platform.</p>
<p>If you have problems then please consult the <a class="externalLink" href="http://groups.google.com/group/usb4java">usb4java Google Group</a>. Someone may be able to help.</p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2011-2013
                        <a href="http://usb4java.org/">usb4java Team</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
